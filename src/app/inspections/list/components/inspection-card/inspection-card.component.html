<article
  class="inspection-card"
  tabindex="0"
  role="button"
  [attr.aria-label]="'View details for ' + inspection.dba"
  [attr.data-grade]="inspection.grade"
  (click)="onViewDetails()"
  (keydown.enter)="onViewDetails()"
  (keydown.space)="onViewDetails()"
>
  <!-- Card Header with Restaurant Name and Grade -->
  <header class="card-header">
    <div class="restaurant-info">
      <h3 class="restaurant-name">{{ inspection.dba }}</h3>
      <div class="restaurant-meta">
        <span class="borough" *ngIf="inspection.boro">{{
          inspection.boro
        }}</span>
        <span class="cuisine" *ngIf="inspection.cuisine_description">{{
          inspection.cuisine_description
        }}</span>
      </div>
    </div>
    <div class="grade-container" *ngIf="inspection.grade">
      <div class="grade-badge" [attr.data-grade]="inspection.grade">
        <span class="grade-letter">{{ inspection.grade }}</span>
      </div>
    </div>
  </header>

  <!-- Card Content -->
  <div class="card-content">
    <!-- Location Information -->
    <div class="info-section location-section">
      <div class="section-header">
        <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
        <span class="section-title">Location</span>
      </div>
      <div class="address-info">
        <div class="address-line">
          {{ inspection.building }} {{ inspection.street }}
        </div>
        <div class="address-line secondary">
          {{ inspection.boro }}, NY {{ inspection.zipcode }}
        </div>
      </div>
    </div>

    <!-- Contact Information -->
    <div class="info-section contact-section" *ngIf="inspection.phone">
      <div class="section-header">
        <i class="fas fa-phone" aria-hidden="true"></i>
        <span class="section-title">Contact</span>
      </div>
      <div class="contact-info">
        <a href="tel:{{ inspection.phone }}" class="phone-link">{{
          inspection.phone
        }}</a>
      </div>
    </div>

    <!-- Inspection Details -->
    <div
      class="info-section inspection-section"
      *ngIf="
        inspection.score ||
        inspection.critical_flag ||
        inspection.violation_description
      "
    >
      <div class="section-header">
        <i class="fas fa-clipboard-check" aria-hidden="true"></i>
        <span class="section-title">Inspection Details</span>
      </div>

      <div class="inspection-metrics">
        <!-- Score -->
        <div class="metric-item score-metric" *ngIf="inspection.score">
          <div class="metric-label">Score</div>
          <div
            class="metric-value score-value"
            [attr.data-score]="inspection.score"
          >
            {{ inspection.score }}
          </div>
        </div>

        <!-- Critical Flag -->
        <div
          class="metric-item critical-metric"
          *ngIf="inspection.critical_flag && inspection.critical_flag !== 'N'"
        >
          <div class="metric-label">Critical Flag</div>
          <div
            class="metric-value critical-value"
            [attr.data-critical]="inspection.critical_flag"
          >
            {{ inspection.critical_flag }}
          </div>
        </div>
      </div>

      <!-- Violation Description -->
      <div class="violation-info" *ngIf="inspection.violation_description">
        <div class="violation-label">Violation</div>
        <div class="violation-description">
          {{ inspection.violation_description }}
        </div>
      </div>
    </div>
  </div>
</article>
